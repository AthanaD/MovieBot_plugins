## 企业微信ChatBot插件

> 基于MovieBot插件系统实现的企业微信ChatBot。

> 目前支持OpenAI官方接口及AiProxy接口。仅AiProxy接口支持上下文，请在设置中配置上下文数量。

## 使用

### 一、下载本插件

- 下载本插件
- 解压后拷贝qywx_chatbot文件夹到MovieBot插件目录

### 二、重启MovieBot

### 三、进入插件管理，配置相关信息。

#### 自定义接口地址

OpenAI默认接口地址为`https://api.openai.com`。如果自建后端接口，请自行修改。

#### 代理设置

如果容器所在网络环境无法访问OpenAI，请配置代理。

#### API_KEY

服务提供商的API_KEY。

#### 上下文数量

每次请求时会自动携带的上下文数量，尽量不要超过5。请注意tokens消耗。

#### 模型

对话使用的模型，目前仅自带了3.5及4的最新模型。如果选择自定义模型选项，则下一个选项生效且必须填写。

#### 自定义模型

你可以在这里填写其他未提供选项的模型，请务必填写正确。

#### 自定义prompt

自定义prompt，会在每次请求中都携带，请注意tokens消耗。其中可用{date}携带当前日期。

#### 画图尺寸及质量

插件支持调用dalle3接口画图，以`画`字开头的文本自动触发，请提前设置好图片尺寸和质量。


#### 企业微信相关配置

企业微信信息，和消息推送通道同样的获取方式，需要单独一个应用，不可与推送通道混用应用

接收消息服务器地址：`http://域名:外网端口/api/plugins/qywx_chatbot/chat`


>除企业微信相关信息外，其他配置修改保存后立刻生效。企业微信配置修改后需要重启容器。
>
>插件仅支持OpenAI格式请求接口，如果使用非OpenAI模型，请自建后端接入模型转换请求格式，如`OneAPI`项目。
